name: Notify Discord on Push  
on:
  push:
    branches:
      - frontend

jobs:
  discord_notification:
    runs-on: ubuntu-latest

    steps:
      - name: Send notification to Discord
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
        run: |
          curl -H "Content-Type: application/json" \
               -X POST \
               -d '{
                    "username": "GitHub Bot",
                    "avatar_url": "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",
                    "embeds": [
                      {
                        "title": "푸시 알림",
                        "description": "**브랜치:** `'${GITHUB_REF_NAME}'`\n**커밋 메시지:** `'${GITHUB_EVENT_HEAD_COMMIT_MESSAGE}'`\n**커밋 작성자:** `'${GITHUB_ACTOR}'`",
                        "color": "0033FF",
                        "image": {
                          "url": "https://i.postimg.cc/SNQjYtv8/vt-logo.png"
                        },
                        "footer": {
                          "text": "GitHub Actions - 자동 알림"
                        },
                        "timestamp": "'$(date -u +"%Y-%m-%dT%H:%M:%SZ")'"
                      }
                    ]
                  }' \
               $DISCORD_WEBHOOK_URL
